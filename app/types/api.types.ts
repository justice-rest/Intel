import type { Database } from "@/app/types/database.types"
import type { Attachment } from "@/lib/file-handling"
import type { ChatMessage, ChatMessagePart } from "@/lib/ai/message-utils"
import type { SupabaseClient } from "@supabase/supabase-js"

export type SupabaseClientType = SupabaseClient<Database>

export type ContentPart = ChatMessagePart

export type Message = ChatMessage

export interface ChatApiParams {
  userId: string
  model: string
  isAuthenticated: boolean
}

export interface LogUserMessageParams {
  supabase: SupabaseClientType
  userId: string
  chatId: string
  content: string
  attachments?: Attachment[]
  model: string
  isAuthenticated: boolean
  message_group_id?: string
}

export interface StoreAssistantMessageParams {
  supabase: SupabaseClientType
  chatId: string
  messages: Message[]
  message_group_id?: string
  model?: string
}

export interface ApiErrorResponse {
  error: string
  details?: string
}

export interface ApiSuccessResponse<T = unknown> {
  success: true
  data?: T
}

export type ApiResponse<T = unknown> = ApiSuccessResponse<T> | ApiErrorResponse
