// biome-ignore-all lint: generated file
/* eslint-disable */

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, "default"), secondTarget && __copyProps(secondTarget, mod, "default"));

// node_modules/workflow/dist/internal/builtins.js
import { registerStepFunction } from "workflow/internal/private";
async function __builtin_response_array_buffer(res) {
  return res.arrayBuffer();
}
__name(__builtin_response_array_buffer, "__builtin_response_array_buffer");
async function __builtin_response_json(res) {
  return res.json();
}
__name(__builtin_response_json, "__builtin_response_json");
async function __builtin_response_text(res) {
  return res.text();
}
__name(__builtin_response_text, "__builtin_response_text");
registerStepFunction("__builtin_response_array_buffer", __builtin_response_array_buffer);
registerStepFunction("__builtin_response_json", __builtin_response_json);
registerStepFunction("__builtin_response_text", __builtin_response_text);

// node_modules/workflow/dist/index.js
var dist_exports = {};
__export(dist_exports, {
  fetch: () => fetch
});
__reExport(dist_exports, core_star);
import * as core_star from "@workflow/core";

// node_modules/workflow/dist/stdlib.js
import { registerStepFunction as registerStepFunction2 } from "workflow/internal/private";
async function fetch(...args) {
  return globalThis.fetch(...args);
}
__name(fetch, "fetch");
registerStepFunction2("step//node_modules/workflow/dist/stdlib.js//fetch", fetch);

// lib/workflows/crm-sync.workflow.ts
import { z } from "zod";
var CRMSyncParamsSchema = z.object({
  userId: z.string().uuid("userId must be a valid UUID"),
  provider: z.enum([
    "bloomerang",
    "virtuous",
    "neoncrm",
    "donorperfect"
  ]),
  apiKey: z.string().min(1, "apiKey is required"),
  syncLogId: z.string().uuid("syncLogId must be a valid UUID")
});
async function syncCRMData(params) {
  throw new Error("You attempted to execute workflow syncCRMData function directly. To start a workflow, use start(syncCRMData) from workflow/api");
}
__name(syncCRMData, "syncCRMData");
syncCRMData.workflowId = "workflow//lib/workflows/crm-sync.workflow.ts//syncCRMData";

// virtual-entry.js
import { stepEntrypoint } from "workflow/runtime";
export {
  stepEntrypoint as POST
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3dvcmtmbG93L3NyYy9pbnRlcm5hbC9idWlsdGlucy50cyIsICIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvd29ya2Zsb3cvc3JjL2luZGV4LnRzIiwgIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy93b3JrZmxvdy9zcmMvc3RkbGliLnRzIiwgIi4uLy4uLy4uLy4uLy4uL2xpYi93b3JrZmxvd3MvY3JtLXN5bmMud29ya2Zsb3cudHMiLCAiLi4vLi4vLi4vLi4vLi4vdmlydHVhbC1lbnRyeS5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFtudWxsLCBudWxsLCBudWxsLCAiLyoqXG4gKiBDUk0gU3luYyBEdXJhYmxlIFdvcmtmbG93XG4gKlxuICogVGhpcyB3b3JrZmxvdyBoYW5kbGVzIENSTSBkYXRhIHN5bmNocm9uaXphdGlvbiB3aXRoOlxuICogLSBBdXRvbWF0aWMgcmV0cnkgb24gdHJhbnNpZW50IGZhaWx1cmVzXG4gKiAtIER1cmFibGUgY2hlY2twb2ludGluZyAocmVzdW1lIGFmdGVyIHNlcnZlciByZXN0YXJ0KVxuICogLSBTdGVwLWxldmVsIG9ic2VydmFiaWxpdHlcbiAqIC0gUmF0ZSBsaW1pdGluZyB3aXRob3V0IHJlc291cmNlIGNvbnN1bXB0aW9uXG4gKlxuICogU3VwcG9ydHM6IEJsb29tZXJhbmcsIFZpcnR1b3VzLCBOZW9uIENSTSwgRG9ub3JQZXJmZWN0XG4gKi8gaW1wb3J0IHsgZmV0Y2ggfSBmcm9tIFwid29ya2Zsb3dcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG4vKipfX2ludGVybmFsX3dvcmtmbG93c3tcIndvcmtmbG93c1wiOntcImxpYi93b3JrZmxvd3MvY3JtLXN5bmMud29ya2Zsb3cudHNcIjp7XCJzeW5jQ1JNRGF0YVwiOntcIndvcmtmbG93SWRcIjpcIndvcmtmbG93Ly9saWIvd29ya2Zsb3dzL2NybS1zeW5jLndvcmtmbG93LnRzLy9zeW5jQ1JNRGF0YVwifX19fSovO1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5QVVQgVkFMSURBVElPTiBTQ0hFTUFcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8qKlxuICogU3RyaWN0IHNjaGVtYSBmb3IgQ1JNIHN5bmMgcGFyYW1ldGVyc1xuICogVXNlcyBab2QgZm9yIHJ1bnRpbWUgdmFsaWRhdGlvblxuICovIGV4cG9ydCBjb25zdCBDUk1TeW5jUGFyYW1zU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzZXJJZDogei5zdHJpbmcoKS51dWlkKFwidXNlcklkIG11c3QgYmUgYSB2YWxpZCBVVUlEXCIpLFxuICAgIHByb3ZpZGVyOiB6LmVudW0oW1xuICAgICAgICBcImJsb29tZXJhbmdcIixcbiAgICAgICAgXCJ2aXJ0dW91c1wiLFxuICAgICAgICBcIm5lb25jcm1cIixcbiAgICAgICAgXCJkb25vcnBlcmZlY3RcIlxuICAgIF0pLFxuICAgIGFwaUtleTogei5zdHJpbmcoKS5taW4oMSwgXCJhcGlLZXkgaXMgcmVxdWlyZWRcIiksXG4gICAgc3luY0xvZ0lkOiB6LnN0cmluZygpLnV1aWQoXCJzeW5jTG9nSWQgbXVzdCBiZSBhIHZhbGlkIFVVSURcIilcbn0pO1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5URVJOQUwgU1RFUCBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8qKlxuICogRmV0Y2ggYWxsIGNvbnN0aXR1ZW50cyBmcm9tIENSTSBwcm92aWRlclxuICogVGhpcyBpcyBhIHN0ZXAgZnVuY3Rpb24gLSB3aWxsIGJlIGNoZWNrcG9pbnRlZCBhZnRlciBjb21wbGV0aW9uXG4gKi8gYXN5bmMgZnVuY3Rpb24gZmV0Y2hDb25zdGl0dWVudHNTdGVwKHBhcmFtcykge1xuICAgIC8vIER5bmFtaWMgaW1wb3J0IHRvIGF2b2lkIGJ1bmRsaW5nIGFsbCBDUk0gYWRhcHRlcnNcbiAgICBjb25zdCB7IGZldGNoQWxsQmxvb21lcmFuZ0NvbnN0aXR1ZW50cywgZmV0Y2hBbGxWaXJ0dW91c0NvbnRhY3RzLCBmZXRjaEFsbE5lb25DUk1BY2NvdW50cywgZmV0Y2hBbGxEb25vclBlcmZlY3REb25vcnMsIG1hcEJsb29tZXJhbmdDb25zdGl0dWVudCwgbWFwVmlydHVvdXNDb250YWN0LCBtYXBOZW9uQ1JNQWNjb3VudCwgbWFwRG9ub3JQZXJmZWN0RG9ub3IsIHBhcnNlTmVvbkNSTUNyZWRlbnRpYWxzLCBDUk1fU1lOQ19DT05GSUcgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2NybVwiKTtcbiAgICBjb25zdCBjb25zdGl0dWVudHMgPSBbXTtcbiAgICBpZiAocGFyYW1zLnByb3ZpZGVyID09PSBcImJsb29tZXJhbmdcIikge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGJhdGNoIG9mIGZldGNoQWxsQmxvb21lcmFuZ0NvbnN0aXR1ZW50cyhwYXJhbXMuYXBpS2V5LCBDUk1fU1lOQ19DT05GSUcuYmF0Y2hTaXplKSl7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGMgb2YgYmF0Y2gpe1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IG1hcEJsb29tZXJhbmdDb25zdGl0dWVudChjKTtcbiAgICAgICAgICAgICAgICBjb25zdGl0dWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIC4uLm1hcHBlZCxcbiAgICAgICAgICAgICAgICAgICAgcmF3RGF0YTogY1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnN0aXR1ZW50cy5sZW5ndGggPj0gQ1JNX1NZTkNfQ09ORklHLm1heFJlY29yZHNQZXJVc2VyKSBicmVhaztcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyYW1zLnByb3ZpZGVyID09PSBcInZpcnR1b3VzXCIpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBiYXRjaCBvZiBmZXRjaEFsbFZpcnR1b3VzQ29udGFjdHMocGFyYW1zLmFwaUtleSwgQ1JNX1NZTkNfQ09ORklHLmJhdGNoU2l6ZSkpe1xuICAgICAgICAgICAgZm9yIChjb25zdCBjIG9mIGJhdGNoKXtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXBWaXJ0dW91c0NvbnRhY3QoYyk7XG4gICAgICAgICAgICAgICAgY29uc3RpdHVlbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi5tYXBwZWQsXG4gICAgICAgICAgICAgICAgICAgIHJhd0RhdGE6IGNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25zdGl0dWVudHMubGVuZ3RoID49IENSTV9TWU5DX0NPTkZJRy5tYXhSZWNvcmRzUGVyVXNlcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5wcm92aWRlciA9PT0gXCJuZW9uY3JtXCIpIHtcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBwYXJzZU5lb25DUk1DcmVkZW50aWFscyhwYXJhbXMuYXBpS2V5KTtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBOZW9uIENSTSBjcmVkZW50aWFscyBmb3JtYXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBmZXRjaEFsbE5lb25DUk1BY2NvdW50cyhjcmVkZW50aWFscyk7XG4gICAgICAgIGZvciAoY29uc3QgYyBvZiBhY2NvdW50cyl7XG4gICAgICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXBOZW9uQ1JNQWNjb3VudChjKTtcbiAgICAgICAgICAgIGNvbnN0aXR1ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAuLi5tYXBwZWQsXG4gICAgICAgICAgICAgICAgcmF3RGF0YTogY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29uc3RpdHVlbnRzLmxlbmd0aCA+PSBDUk1fU1lOQ19DT05GSUcubWF4UmVjb3Jkc1BlclVzZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJhbXMucHJvdmlkZXIgPT09IFwiZG9ub3JwZXJmZWN0XCIpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBiYXRjaCBvZiBmZXRjaEFsbERvbm9yUGVyZmVjdERvbm9ycyhwYXJhbXMuYXBpS2V5LCBDUk1fU1lOQ19DT05GSUcuYmF0Y2hTaXplKSl7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGQgb2YgYmF0Y2gpe1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IG1hcERvbm9yUGVyZmVjdERvbm9yKGQpO1xuICAgICAgICAgICAgICAgIGNvbnN0aXR1ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubWFwcGVkLFxuICAgICAgICAgICAgICAgICAgICByYXdEYXRhOiBkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29uc3RpdHVlbnRzLmxlbmd0aCA+PSBDUk1fU1lOQ19DT05GSUcubWF4UmVjb3Jkc1BlclVzZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0aXR1ZW50c1xuICAgIH07XG59XG4vKipcbiAqIEZldGNoIGFsbCBkb25hdGlvbnMgZnJvbSBDUk0gcHJvdmlkZXJcbiAqLyBhc3luYyBmdW5jdGlvbiBmZXRjaERvbmF0aW9uc1N0ZXAocGFyYW1zKSB7XG4gICAgY29uc3QgeyBmZXRjaEFsbEJsb29tZXJhbmdUcmFuc2FjdGlvbnMsIGZldGNoQWxsVmlydHVvdXNHaWZ0cywgZmV0Y2hBbGxOZW9uQ1JNRG9uYXRpb25zLCBmZXRjaEFsbERvbm9yUGVyZmVjdEdpZnRzLCBtYXBCbG9vbWVyYW5nVHJhbnNhY3Rpb24sIG1hcFZpcnR1b3VzR2lmdCwgbWFwTmVvbkNSTURvbmF0aW9uLCBtYXBEb25vclBlcmZlY3RHaWZ0LCBwYXJzZU5lb25DUk1DcmVkZW50aWFscywgQ1JNX1NZTkNfQ09ORklHIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9jcm1cIik7XG4gICAgY29uc3QgZG9uYXRpb25zID0gW107XG4gICAgaWYgKHBhcmFtcy5wcm92aWRlciA9PT0gXCJibG9vbWVyYW5nXCIpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBiYXRjaCBvZiBmZXRjaEFsbEJsb29tZXJhbmdUcmFuc2FjdGlvbnMocGFyYW1zLmFwaUtleSwgQ1JNX1NZTkNfQ09ORklHLmJhdGNoU2l6ZSkpe1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGJhdGNoKXtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXBCbG9vbWVyYW5nVHJhbnNhY3Rpb24odCk7XG4gICAgICAgICAgICAgICAgZG9uYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi5tYXBwZWQsXG4gICAgICAgICAgICAgICAgICAgIHJhd0RhdGE6IHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyYW1zLnByb3ZpZGVyID09PSBcInZpcnR1b3VzXCIpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBiYXRjaCBvZiBmZXRjaEFsbFZpcnR1b3VzR2lmdHMocGFyYW1zLmFwaUtleSwgQ1JNX1NZTkNfQ09ORklHLmJhdGNoU2l6ZSkpe1xuICAgICAgICAgICAgZm9yIChjb25zdCBnIG9mIGJhdGNoKXtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXBWaXJ0dW91c0dpZnQoZyk7XG4gICAgICAgICAgICAgICAgZG9uYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAuLi5tYXBwZWQsXG4gICAgICAgICAgICAgICAgICAgIHJhd0RhdGE6IGdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFyYW1zLnByb3ZpZGVyID09PSBcIm5lb25jcm1cIikge1xuICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IHBhcnNlTmVvbkNSTUNyZWRlbnRpYWxzKHBhcmFtcy5hcGlLZXkpO1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIE5lb24gQ1JNIGNyZWRlbnRpYWxzIGZvcm1hdFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGxEb25hdGlvbnMgPSBhd2FpdCBmZXRjaEFsbE5lb25DUk1Eb25hdGlvbnMoY3JlZGVudGlhbHMpO1xuICAgICAgICBmb3IgKGNvbnN0IGQgb2YgYWxsRG9uYXRpb25zKXtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IG1hcE5lb25DUk1Eb25hdGlvbihkKTtcbiAgICAgICAgICAgIGRvbmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAuLi5tYXBwZWQsXG4gICAgICAgICAgICAgICAgcmF3RGF0YTogZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5wcm92aWRlciA9PT0gXCJkb25vcnBlcmZlY3RcIikge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGJhdGNoIG9mIGZldGNoQWxsRG9ub3JQZXJmZWN0R2lmdHMocGFyYW1zLmFwaUtleSwgQ1JNX1NZTkNfQ09ORklHLmJhdGNoU2l6ZSkpe1xuICAgICAgICAgICAgZm9yIChjb25zdCBnIG9mIGJhdGNoKXtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXBEb25vclBlcmZlY3RHaWZ0KGcpO1xuICAgICAgICAgICAgICAgIGRvbmF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubWFwcGVkLFxuICAgICAgICAgICAgICAgICAgICByYXdEYXRhOiBnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9uYXRpb25zXG4gICAgfTtcbn1cbi8qKlxuICogVXBzZXJ0IGNvbnN0aXR1ZW50cyB0byBkYXRhYmFzZSBpbiBiYXRjaGVzXG4gKi8gYXN5bmMgZnVuY3Rpb24gdXBzZXJ0Q29uc3RpdHVlbnRzU3RlcChjb25zdGl0dWVudHMsIHVzZXJJZCwgc3luY0xvZ0lkKSB7XG4gICAgY29uc3QgeyBjcmVhdGVDbGllbnQgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiKTtcbiAgICBjb25zdCB7IENSTV9TWU5DX0NPTkZJRywgQ1JNX0FQSV9DT05GSUcgfSA9IGF3YWl0IGltcG9ydChcIkAvbGliL2NybVwiKTtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xuICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3VwYWJhc2Ugbm90IGNvbmZpZ3VyZWRcIik7XG4gICAgfVxuICAgIGxldCBzeW5jZWQgPSAwO1xuICAgIGxldCBmYWlsZWQgPSAwO1xuICAgIC8vIFByb2Nlc3MgaW4gYmF0Y2hlcyB3aXRoIHJhdGUgbGltaXRpbmdcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29uc3RpdHVlbnRzLmxlbmd0aDsgaSArPSBDUk1fU1lOQ19DT05GSUcuYmF0Y2hTaXplKXtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBjb25zdGl0dWVudHMuc2xpY2UoaSwgaSArIENSTV9TWU5DX0NPTkZJRy5iYXRjaFNpemUpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwiY3JtX2NvbnN0aXR1ZW50c1wiKS51cHNlcnQoYmF0Y2gubWFwKChjKT0+KHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IGMucHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxfaWQ6IGMuZXh0ZXJuYWxJZCxcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiBjLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0X25hbWU6IGMubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lOiBjLmZ1bGxOYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBjLmVtYWlsLFxuICAgICAgICAgICAgICAgIHBob25lOiBjLnBob25lLFxuICAgICAgICAgICAgICAgIHN0cmVldF9hZGRyZXNzOiBjLnN0cmVldEFkZHJlc3MsXG4gICAgICAgICAgICAgICAgY2l0eTogYy5jaXR5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBjLnN0YXRlLFxuICAgICAgICAgICAgICAgIHppcF9jb2RlOiBjLnppcENvZGUsXG4gICAgICAgICAgICAgICAgY291bnRyeTogYy5jb3VudHJ5LFxuICAgICAgICAgICAgICAgIHRvdGFsX2xpZmV0aW1lX2dpdmluZzogYy50b3RhbExpZmV0aW1lR2l2aW5nLFxuICAgICAgICAgICAgICAgIGxhcmdlc3RfZ2lmdDogYy5sYXJnZXN0R2lmdCxcbiAgICAgICAgICAgICAgICBsYXN0X2dpZnRfYW1vdW50OiBjLmxhc3RHaWZ0QW1vdW50LFxuICAgICAgICAgICAgICAgIGxhc3RfZ2lmdF9kYXRlOiBjLmxhc3RHaWZ0RGF0ZSxcbiAgICAgICAgICAgICAgICBmaXJzdF9naWZ0X2RhdGU6IGMuZmlyc3RHaWZ0RGF0ZSxcbiAgICAgICAgICAgICAgICBnaWZ0X2NvdW50OiBjLmdpZnRDb3VudCxcbiAgICAgICAgICAgICAgICBjdXN0b21fZmllbGRzOiBjLmN1c3RvbUZpZWxkcyB8fCB7fSxcbiAgICAgICAgICAgICAgICByYXdfZGF0YTogYy5yYXdEYXRhLFxuICAgICAgICAgICAgICAgIHN5bmNlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIG9uQ29uZmxpY3Q6IFwidXNlcl9pZCxwcm92aWRlcixleHRlcm5hbF9pZFwiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbQ1JNIFN5bmNdIEVycm9yIHVwc2VydGluZyBjb25zdGl0dWVudHMgYmF0Y2g6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIGZhaWxlZCArPSBiYXRjaC5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzeW5jZWQgKz0gYmF0Y2gubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyBpbiBzeW5jIGxvZ1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKFwiY3JtX3N5bmNfbG9nc1wiKS51cGRhdGUoe1xuICAgICAgICAgICAgcmVjb3Jkc19zeW5jZWQ6IHN5bmNlZCxcbiAgICAgICAgICAgIHJlY29yZHNfZmFpbGVkOiBmYWlsZWRcbiAgICAgICAgfSkuZXEoXCJpZFwiLCBzeW5jTG9nSWQpO1xuICAgICAgICAvLyBSYXRlIGxpbWl0IGRlbGF5IGJldHdlZW4gYmF0Y2hlc1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PnNldFRpbWVvdXQocmVzb2x2ZSwgQ1JNX0FQSV9DT05GSUcucmF0ZUxpbWl0RGVsYXkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3luY2VkLFxuICAgICAgICBmYWlsZWRcbiAgICB9O1xufVxuLyoqXG4gKiBVcHNlcnQgZG9uYXRpb25zIHRvIGRhdGFiYXNlIGluIGJhdGNoZXNcbiAqLyBhc3luYyBmdW5jdGlvbiB1cHNlcnREb25hdGlvbnNTdGVwKGRvbmF0aW9ucywgdXNlcklkLCBzeW5jTG9nSWQsIHByZXZpb3VzU3luY2VkLCBwcmV2aW91c0ZhaWxlZCkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3QgeyBDUk1fU1lOQ19DT05GSUcsIENSTV9BUElfQ09ORklHIH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9jcm1cIik7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN1cGFiYXNlIG5vdCBjb25maWd1cmVkXCIpO1xuICAgIH1cbiAgICBsZXQgc3luY2VkID0gcHJldmlvdXNTeW5jZWQ7XG4gICAgbGV0IGZhaWxlZCA9IHByZXZpb3VzRmFpbGVkO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkb25hdGlvbnMubGVuZ3RoOyBpICs9IENSTV9TWU5DX0NPTkZJRy5iYXRjaFNpemUpe1xuICAgICAgICBjb25zdCBiYXRjaCA9IGRvbmF0aW9ucy5zbGljZShpLCBpICsgQ1JNX1NZTkNfQ09ORklHLmJhdGNoU2l6ZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oXCJjcm1fZG9uYXRpb25zXCIpLnVwc2VydChiYXRjaC5tYXAoKGQpPT4oe1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogZC5wcm92aWRlcixcbiAgICAgICAgICAgICAgICBleHRlcm5hbF9pZDogZC5leHRlcm5hbElkLFxuICAgICAgICAgICAgICAgIGNvbnN0aXR1ZW50X2V4dGVybmFsX2lkOiBkLmNvbnN0aXR1ZW50RXh0ZXJuYWxJZCxcbiAgICAgICAgICAgICAgICBhbW91bnQ6IGQuYW1vdW50LFxuICAgICAgICAgICAgICAgIGRvbmF0aW9uX2RhdGU6IGQuZG9uYXRpb25EYXRlLFxuICAgICAgICAgICAgICAgIGRvbmF0aW9uX3R5cGU6IGQuZG9uYXRpb25UeXBlLFxuICAgICAgICAgICAgICAgIGNhbXBhaWduX25hbWU6IGQuY2FtcGFpZ25OYW1lLFxuICAgICAgICAgICAgICAgIGZ1bmRfbmFtZTogZC5mdW5kTmFtZSxcbiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZDogZC5wYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZC5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbm90ZXM6IGQubm90ZXMsXG4gICAgICAgICAgICAgICAgY3VzdG9tX2ZpZWxkczogZC5jdXN0b21GaWVsZHMgfHwge30sXG4gICAgICAgICAgICAgICAgcmF3X2RhdGE6IGQucmF3RGF0YSxcbiAgICAgICAgICAgICAgICBzeW5jZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBvbkNvbmZsaWN0OiBcInVzZXJfaWQscHJvdmlkZXIsZXh0ZXJuYWxfaWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW0NSTSBTeW5jXSBFcnJvciB1cHNlcnRpbmcgZG9uYXRpb25zIGJhdGNoOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBmYWlsZWQgKz0gYmF0Y2gubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3luY2VkICs9IGJhdGNoLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbShcImNybV9zeW5jX2xvZ3NcIikudXBkYXRlKHtcbiAgICAgICAgICAgIHJlY29yZHNfc3luY2VkOiBzeW5jZWQsXG4gICAgICAgICAgICByZWNvcmRzX2ZhaWxlZDogZmFpbGVkXG4gICAgICAgIH0pLmVxKFwiaWRcIiwgc3luY0xvZ0lkKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIENSTV9BUElfQ09ORklHLnJhdGVMaW1pdERlbGF5KSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHN5bmNlZCxcbiAgICAgICAgZmFpbGVkXG4gICAgfTtcbn1cbi8qKlxuICogTWFyayBzeW5jIGFzIGNvbXBsZXRlZCBpbiBkYXRhYmFzZVxuICovIGFzeW5jIGZ1bmN0aW9uIG1hcmtTeW5jQ29tcGxldGVTdGVwKHN5bmNMb2dJZCwgcmVjb3Jkc1N5bmNlZCwgcmVjb3Jkc0ZhaWxlZCkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN1cGFiYXNlIG5vdCBjb25maWd1cmVkXCIpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oXCJjcm1fc3luY19sb2dzXCIpLnVwZGF0ZSh7XG4gICAgICAgIHN0YXR1czogXCJjb21wbGV0ZWRcIixcbiAgICAgICAgcmVjb3Jkc19zeW5jZWQ6IHJlY29yZHNTeW5jZWQsXG4gICAgICAgIHJlY29yZHNfZmFpbGVkOiByZWNvcmRzRmFpbGVkLFxuICAgICAgICBjb21wbGV0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pLmVxKFwiaWRcIiwgc3luY0xvZ0lkKTtcbn1cbi8qKlxuICogTWFyayBzeW5jIGFzIGZhaWxlZCBpbiBkYXRhYmFzZVxuICovIGFzeW5jIGZ1bmN0aW9uIG1hcmtTeW5jRmFpbGVkU3RlcChzeW5jTG9nSWQsIHJlY29yZHNTeW5jZWQsIHJlY29yZHNGYWlsZWQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoXCJAL2xpYi9zdXBhYmFzZS9zZXJ2ZXJcIik7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN1cGFiYXNlIG5vdCBjb25maWd1cmVkXCIpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oXCJjcm1fc3luY19sb2dzXCIpLnVwZGF0ZSh7XG4gICAgICAgIHN0YXR1czogXCJmYWlsZWRcIixcbiAgICAgICAgcmVjb3Jkc19zeW5jZWQ6IHJlY29yZHNTeW5jZWQsXG4gICAgICAgIHJlY29yZHNfZmFpbGVkOiByZWNvcmRzRmFpbGVkLFxuICAgICAgICBlcnJvcl9tZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIGNvbXBsZXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSkuZXEoXCJpZFwiLCBzeW5jTG9nSWQpO1xufVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTUFJTiBXT1JLRkxPVyBGVU5DVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLyoqXG4gKiBEdXJhYmxlIENSTSBTeW5jIFdvcmtmbG93XG4gKlxuICogVGhpcyBpcyB0aGUgbWFpbiB3b3JrZmxvdyBmdW5jdGlvbiB0aGF0IG9yY2hlc3RyYXRlcyB0aGUgQ1JNIHN5bmMgcHJvY2Vzcy5cbiAqIEVhY2ggc3RlcCBpcyBhdXRvbWF0aWNhbGx5IGNoZWNrcG9pbnRlZCwgYWxsb3dpbmcgdGhlIHdvcmtmbG93IHRvIHJlc3VtZVxuICogZnJvbSB0aGUgbGFzdCBjb21wbGV0ZWQgc3RlcCBpZiBpbnRlcnJ1cHRlZC5cbiAqXG4gKiBAcGFyYW0gcGFyYW1zIC0gVmFsaWRhdGVkIHN5bmMgcGFyYW1ldGVyc1xuICogQHJldHVybnMgQ1JNU3luY1Jlc3VsdCB3aXRoIGNvdW50cyBhbmQgZHVyYXRpb25cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgc3luY0NSTURhdGEgfSBmcm9tIFwiQC9saWIvd29ya2Zsb3dzL2NybS1zeW5jLndvcmtmbG93XCJcbiAqIGltcG9ydCB7IHJ1bkR1cmFibGVXb3JrZmxvdyB9IGZyb20gXCJAL2xpYi93b3JrZmxvd3NcIlxuICpcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1bkR1cmFibGVXb3JrZmxvdyhzeW5jQ1JNRGF0YSwge1xuICogICB1c2VySWQ6IHVzZXIuaWQsXG4gKiAgIHByb3ZpZGVyOiBcImJsb29tZXJhbmdcIixcbiAqICAgYXBpS2V5OiBkZWNyeXB0ZWRLZXksXG4gKiAgIHN5bmNMb2dJZDogc3luY0xvZy5pZCxcbiAqIH0pXG4gKiBgYGBcbiAqLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gc3luY0NSTURhdGEocGFyYW1zKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGF0dGVtcHRlZCB0byBleGVjdXRlIHdvcmtmbG93IHN5bmNDUk1EYXRhIGZ1bmN0aW9uIGRpcmVjdGx5LiBUbyBzdGFydCBhIHdvcmtmbG93LCB1c2Ugc3RhcnQoc3luY0NSTURhdGEpIGZyb20gd29ya2Zsb3cvYXBpXCIpO1xufVxuc3luY0NSTURhdGEud29ya2Zsb3dJZCA9IFwid29ya2Zsb3cvL2xpYi93b3JrZmxvd3MvY3JtLXN5bmMud29ya2Zsb3cudHMvL3N5bmNDUk1EYXRhXCI7XG4iLCAiXG4gICAgLy8gQnVpbHQgaW4gc3RlcHNcbiAgICBpbXBvcnQgJ3dvcmtmbG93L2ludGVybmFsL2J1aWx0aW5zJztcbiAgICAvLyBVc2VyIHN0ZXBzXG4gICAgaW1wb3J0ICcuL2xpYi93b3JrZmxvd3MvY3JtLXN5bmMud29ya2Zsb3cudHMnO1xuaW1wb3J0ICcuL25vZGVfbW9kdWxlcy93b3JrZmxvdy9kaXN0L3N0ZGxpYi5qcyc7XG4gICAgLy8gQVBJIGVudHJ5cG9pbnRcbiAgICBleHBvcnQgeyBzdGVwRW50cnlwb2ludCBhcyBQT1NUIH0gZnJvbSAnd29ya2Zsb3cvcnVudGltZSc7Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxTQUFBLDRCQUFBO0FBT0UsZUFBVyxnQ0FBQSxLQUFBO0FBQ1gsU0FBTyxJQUFJLFlBQVc7QUFDeEI7QUFGYTtBQUliLGVBQXNCLHdCQUF3QixLQUFhO0FBQ3pELFNBQUEsSUFBVyxLQUFBOztBQURTO0FBR3RCLGVBQUMsd0JBQUEsS0FBQTtBQUVELFNBQU8sSUFBSyxLQUFBOztBQUZYO3FCQUlrQixtQ0FBQywrQkFBQTtBQUNwQixxQkFBQywyQkFBQSx1QkFBQTs7OztBQ25CRDs7Ozs7MkJBQWM7OztBQ0FkLFNBQUEsd0JBQUFBLDZCQUFBO0FBYUEsZUFBc0IsU0FBa0QsTUFBQTtBQUN0RSxTQUFBLFdBQVcsTUFBQSxHQUFBLElBQUE7O0FBRFM7QUFHdEJDLHNCQUFDLHFEQUFBLEtBQUE7OztBQ0xELFNBQVMsU0FBUztBQVFQLElBQU0sc0JBQXNCLEVBQUUsT0FBTztBQUFBLEVBQzVDLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyw2QkFBNkI7QUFBQSxFQUNyRCxVQUFVLEVBQUUsS0FBSztBQUFBLElBQ2I7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNKLENBQUM7QUFBQSxFQUNELFFBQVEsRUFBRSxPQUFPLEVBQUUsSUFBSSxHQUFHLG9CQUFvQjtBQUFBLEVBQzlDLFdBQVcsRUFBRSxPQUFPLEVBQUUsS0FBSyxnQ0FBZ0M7QUFDL0QsQ0FBQztBQStSRyxlQUFzQixZQUFZLFFBQVE7QUFDMUMsUUFBTSxJQUFJLE1BQU0sZ0lBQWdJO0FBQ3BKO0FBRjBCO0FBRzFCLFlBQVksYUFBYTs7O0FDeFRyQixTQUEyQixzQkFBWTsiLAogICJuYW1lcyI6IFsicmVnaXN0ZXJTdGVwRnVuY3Rpb24iLCAicmVnaXN0ZXJTdGVwRnVuY3Rpb24iXQp9Cg==
